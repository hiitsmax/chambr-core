{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://chambr.dev/contracts/theatrical-v3/events.schema.json",
  "title": "Chambr Theatrical V3 Events",
  "type": "array",
  "minItems": 1,
  "items": {
    "$ref": "#/$defs/theatricalEvent"
  },
  "$defs": {
    "theatricalEvent": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "type",
        "author",
        "content",
        "eventId",
        "beatId",
        "schemaVersion",
        "visibility",
        "intensity",
        "origin"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["speak", "action", "thought"]
        },
        "author": {
          "type": "string",
          "minLength": 1
        },
        "content": {
          "type": "string",
          "minLength": 1
        },
        "eventId": {
          "type": "string",
          "pattern": "^t[0-9]+-[0-9]+$"
        },
        "beatId": {
          "type": "string",
          "pattern": "^b[0-9]+-[0-9]+$"
        },
        "schemaVersion": {
          "const": 1
        },
        "visibility": {
          "type": "string",
          "enum": ["public", "private"]
        },
        "intensity": {
          "type": "integer",
          "minimum": 1,
          "maximum": 5
        },
        "origin": {
          "type": "string",
          "enum": ["roomie", "director", "repair"]
        }
      }
    }
  }
}
